<!doctype html><html lang=de-de><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:site_name" content><meta property="og:type" content="article"><meta property="og:image" content="https://www.alexander-koepke.de//koepalex.logo.gif"><meta property="twitter:image" content="https://www.alexander-koepke.de//koepalex.logo.gif"><meta name=title content="OPC UA Data Modelling"><meta property="og:title" content="OPC UA Data Modelling"><meta property="twitter:title" content="OPC UA Data Modelling"><meta name=description content="Technical articles, the Universe and the all the rest"><meta property="og:description" content="Technical articles, the Universe and the all the rest"><meta property="twitter:description" content="Technical articles, the Universe and the all the rest"><meta property="twitter:card" content="summary"><meta name=keyword content><link rel="shortcut icon" href=/img/favicon.ico><title>OPC UA Data Modelling | </title><link rel=canonical href=/post/2024-03-20_opcua_compressor_modelling/><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/hugo-theme-cleanwhite.min.css><link rel=stylesheet href=/css/zanshang.css><link rel=stylesheet href=/css/font-awesome.all.min.css><script src=/js/jquery.min.js></script><script src=/js/bootstrap.min.js></script><script src=/js/hux-blog.min.js></script><script src=/js/lazysizes.min.js></script></head><nav class="navbar navbar-default navbar-custom navbar-fixed-top"><div class=container-fluid><div class="navbar-header page-scroll"><button type=button class=navbar-toggle>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span>
</button>
<a class=navbar-brand href=/></a></div><div id=huxblog_navbar><div class=navbar-collapse><ul class="nav navbar-nav navbar-right"><li><a href=/>All Posts</a></li><li><a href=/categories/dotnet/>dotnet</a></li><li><a href=/categories/miscellaneous/>miscellaneous</a></li><li><a href=/categories/opc-ua/>opc ua</a></li><li><a href=/categories/til/>til</a></li><li><a href=/about//>ABOUT</a></li><li><a href=/search><i class="fa fa-search"></i></a></li></ul></div></div></div></nav><script>var $body=document.body,$toggle=document.querySelector(".navbar-toggle"),$navbar=document.querySelector("#huxblog_navbar"),$collapse=document.querySelector(".navbar-collapse");$toggle.addEventListener("click",handleMagic);function handleMagic(){$navbar.className.indexOf("in")>0?($navbar.className=" ",setTimeout(function(){$navbar.className.indexOf("in")<0&&($collapse.style.height="0px")},400)):($collapse.style.height="auto",$navbar.className+=" in")}</script><style type=text/css>header.intro-header{background-image:url(/koepalex.logo.gif)}</style><header class=intro-header><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><div class=tags><a class=tag href=/tags/opcua title=opcua>opcua
</a><a class=tag href=/tags/siome title=siome>siome</a></div><h1>OPC UA Data Modelling</h1><h2 class=subheading></h2><span class=meta>Posted by
on
Wednesday, March 20, 2024</span></div></div></div></div></header><article><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
post-container"><p>In this comprehensive tutorial, we will explore the process of OPC UA data modelling. The tutorial will cover modeling a machine, creating an OPC UA server to simulate machinery values, reading data from the server and transmitting it downstream (e.g., to the cloud), and detecting anomalies.</p><h2 id=what-is-opc-ua>What is OPC UA?</h2><p>To answer this question, I like to cite Stefan Hoppe the President and Executive Director of the OPC Foundation:</p><blockquote><p>OPC Unified Architecture (OPC UA) is the information exchange standard for secure, reliable, manufacturer- and platform-independent industrial communications. It enables data exchange between products from different manufacturers and across operating systems. The OPC UA standard is based on specifications that were developed in close cooperation between manufacturers, users, research institutes and consortia, in order to enable consistent information exchange in heterogeneous systems.</p><p>For nearly three decades, OPC has been, and continues to be, the go to connectivity standard in indus-
try. With the advent of the Internet of Things (IoT) era, OPC adoption has also shown growth in new, non-industrial markets. By introducing a Service-Oriented-Architecture (SOA) in industrial automation systems in 2007, OPC UA started to offer a scalable, platform-independent solution for interoperability which combines the benefits of web services and integrated security with a consistent data model.</p></blockquote><p>OPC UA is an IEC standard and is therefore ideally suited for collaboration with other organizations.
The biggest value from my point of view is that OPC UA were able to create an ecosystem for connectivity, it is not just one protocol (opc.tcp) rather can work with different procotols (opc.http, mqtt, &mldr;) and different payload encodings (UADP, Json, XML, &mldr;) and even more important today are the so called OPC UA Companion Specs, which provide the best available industrial information model to interact with all sorts for machineries.</p><h2 id=demystifying-opc-ua-data-modelling>Demystifying OPC UA Data Modelling</h2><h3 id=is-opc-ua-too-complex>Is OPC UA Too Complex?</h3><p>Despite its comprehensive capabilities, OPC UA is not overly complex, as demonstrated through a concrete example. Consider modeling a compressor with four properties:</p><ul><li>EnergyConsumption (double)</li><li>ErrorState (boolean)</li><li>MachineIdentifier (string)</li><li>OilPressure (double)</li></ul><p>The defacto standard to model something in OPC UA are NodeSet2 XML files, and there are a variaty of tools to generate them. We are going to use the free <a href="%5Bhttps://support.industry.siemens.com/cs/document/109755133/siemens-opc-ua-modeling-editor-(siome)?dti=0&amp;dl=en&amp;lc=de-DE%5D(https://support.industry.siemens.com/cs/document/109755133/siemens-opc-ua-modeling-editor-(siome)?dti=0&amp;dl=en&amp;lc=de-DE)">Siemens OPC UA Modeling Editor (SiOME)</a>. SiOME is an Windows application that can be downloaded for free after registration and don&rsquo;t need an installation. Let&rsquo;s walk through the steps:</p><ol><li>Adding a Namespace</li></ol><p>Start by adding a new namespace, e.g., alexander-koepke.de/opcua/compressor.
<img src=/images/siome-new-namespace.png alt>
<img src=/images/siome-namespace-dialog.png alt></p><ol start=2><li>Creating Object Types</li></ol><p>Define a new type, such as <code>MyCompressorType</code>(right click on <em>Root/Types/ObjectTypes/BaseObjectType</em> and select <em>Add New ObjectType</em>)</p><p><img src=/images/siome-new-objecttype-dialog.png alt></p><ol start=3><li>Configuring Properties</li></ol><p>Add the properties and configure each property with the appropriate data type (right click on <em>Root/Types/ObjectTypes/BaseObjectType/MyCompressorType</em> and select <em>Add Child</em>).
<img src=/images/siome-add-child-energyconsumption.png alt>
Change the <em>NodeClass</em> to <strong>Variable</strong> (other possibilities are <strong>Object</strong> or <strong>Method</strong>) and the <em>DataType</em> to <strong>Double</strong>. OPC UA has a rich type system, that can also be extended by own types, this is one of the reasons why OPC UA is so valuable to industrial communication. Now we finish our type by adding the other properties of the compressor:
<img src=/images/siome-add-child-errorstate.png alt>
<img src=/images/siome-add-child-machineidentifier.png alt>
<img src=/images/siome-add-child-oilpressure.png alt></p><ol start=4><li>Saving the Model</li></ol><p>Save the model as a NodeSet2 XML file, e.g., <a href=/files/MyCompressorType.NodeSet2.xml><code>MyCompressorType.NodeSet2.xml</code></a>.</p><p>By following these steps, users can efficiently model machinery in OPC UA without unnecessary complexity.</p><h2 id=scaling-up-for-production-environments>Scaling Up for Production Environments</h2><p>In larger production environments, OPC UA provides a vast array of existing information models, available at <a href=https://reference.opcfoundation.org>https://reference.opcfoundation.org</a>. These models, typically represented by documents with numbers equal to or greater than <strong>10000-100</strong>, serve as companion specifications, defining predefined types, interfaces, events, and data types.</p><p>For more sophisticated applications, it&rsquo;s advisable to leverage existing companion specifications before creating custom types. These specifications streamline the modeling process by providing pre-defined structures and definitions. Users can import NodeSet2 XML files from the repository <a href=https://github.com/OPCFoundation/UA-Nodeset>https://github.com/OPCFoundation/UA-Nodeset</a> to incorporate companion specifications into their projects seamlessly.</p><p>As example to start the integration of the companion specification for Devices (Device Integration): <a href=https://raw.githubusercontent.com/OPCFoundation/UA-Nodeset/latest/DI/Opc.Ua.Di.NodeSet2.xml>https://raw.githubusercontent.com/OPCFoundation/UA-Nodeset/latest/DI/Opc.Ua.Di.NodeSet2.xml</a> add instances of <code>IVendorNameplateType</code> and <code>ITagNameplateType</code> to the <code>MyCompressorType</code>.</p><p>In conclusion, while OPC UA offers robust capabilities for complex industrial scenarios, tools like SiOME and existing companion specifications simplify the data modeling process, making OPC UA accessible even for simpler use cases.</p><p>Stay tuned for the next article, where we&rsquo;ll demonstrate how to use the NodeSet2 XML file to create an OPC UA server that simulates values for the compressor.</p><hr><ul class=pager><li class=previous><a href=/post/2023-10-18-til-dotnet-stack-size/ data-toggle=tooltip data-placement=top title="Dotnet default stack size">&larr;
Previous Post</a></li><li class=next><a href=/post/2024-04-05_opcua_cloudevents_extension/ data-toggle=tooltip data-placement=top title="Enhancing Industrial IoT with Cloud Events">Next
Post &rarr;</a></li></ul></div><div class="col-lg-2 col-lg-offset-0
visible-lg-block
sidebar-container
catalog-container"><div class=side-catalog><hr class="hidden-sm hidden-xs"><h5><a class=catalog-toggle href=#>CATALOG</a></h5><ul class=catalog-body></ul></div></div><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
sidebar-container"></div></div></div></article><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center"><li><a href=mailto:this-is@alexander-koepke.de><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-envelope fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://twitter.com/koepalex><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-twitter fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://github.com/koepalex><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://www.linkedin.com/in/alexander-k%c3%b6pke-3222a21b7/><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://stackoverflow.com/users/9474615/koepalex><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-stack-overflow fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=@koepalex@dotnet.social><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-mastodon fa-stack-1x fa-inverse"></i></span></a></li><li><a href rel=alternate type=application/rss+xml title><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-rss fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="copyright text-muted">Copyright &copy; 2024<br><a href=https://themes.gohugo.io/hugo-theme-cleanwhite>CleanWhite Hugo Theme</a> by <a href=https://zhaohuabing.com>Huabing</a> |
<iframe style=margin-left:2px;margin-bottom:-5px frameborder=0 scrolling=0 width=100px height=20px src="https://ghbtns.com/github-btn.html?user=zhaohuabing&repo=hugo-theme-cleanwhite&type=star&count=true"></iframe></p></div></div></div></footer><script>function loadAsync(e,t){var s=document,o="script",n=s.createElement(o),i=s.getElementsByTagName(o)[0];n.src=e,t&&n.addEventListener("load",function(e){t(null,e)},!1),i.parentNode.insertBefore(n,i)}</script><script>$("#tag_cloud").length!==0&&loadAsync("/js/jquery.tagcloud.js",function(){$.fn.tagcloud.defaults={color:{start:"#bbbbee",end:"#0085a1"}},$("#tag_cloud a").tagcloud()})</script><script>loadAsync("https://cdn.jsdelivr.net/npm/fastclick@1.0.6/lib/fastclick.min.js",function(){var e=document.querySelector("nav");e&&FastClick.attach(e)})</script><script type=text/javascript>function generateCatalog(e){_containerSelector="div.post-container";var t,n,s,o,i,a=$(_containerSelector),r=a.find("h1,h2,h3,h4,h5,h6");return $(e).html(""),r.each(function(){t=$(this).prop("tagName").toLowerCase(),o="#"+$(this).prop("id"),n=$(this).text(),i=$('<a href="'+o+'" rel="nofollow">'+n+"</a>"),s=$('<li class="'+t+'_nav"></li>').append(i),$(e).append(s)}),!0}generateCatalog(".catalog-body"),$(".catalog-toggle").click(function(e){e.preventDefault(),$(".side-catalog").toggleClass("fold")}),loadAsync("/js/jquery.nav.js",function(){$(".catalog-body").onePageNav({currentClass:"active",changeHash:!1,easing:"swing",filter:"",scrollSpeed:700,scrollOffset:0,scrollThreshold:.2,begin:null,end:null,scrollChange:null,padding:80})})</script></body></html>