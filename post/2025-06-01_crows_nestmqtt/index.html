<!doctype html><html lang=de-de><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:site_name" content><meta property="og:type" content="article"><meta property="og:image" content="https://www.alexander-koepke.de//koepalex.logo.gif"><meta property="twitter:image" content="https://www.alexander-koepke.de//koepalex.logo.gif"><meta name=title content="Crow's NestMQTT"><meta property="og:title" content="Crow's NestMQTT"><meta property="twitter:title" content="Crow's NestMQTT"><meta name=description content="Technical articles, the Universe and the all the rest"><meta property="og:description" content="Technical articles, the Universe and the all the rest"><meta property="twitter:description" content="Technical articles, the Universe and the all the rest"><meta property="twitter:card" content="summary"><meta name=keyword content><link rel="shortcut icon" href=/img/favicon.ico><title>Crow's NestMQTT |</title><link rel=canonical href=/post/2025-06-01_crows_nestmqtt/><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/hugo-theme-cleanwhite.min.css><link rel=stylesheet href=/css/zanshang.css><link rel=stylesheet href=/css/font-awesome.all.min.css><script src=/js/jquery.min.js></script><script src=/js/bootstrap.min.js></script><script src=/js/hux-blog.min.js></script><script src=/js/lazysizes.min.js></script></head><nav class="navbar navbar-default navbar-custom navbar-fixed-top"><div class=container-fluid><div class="navbar-header page-scroll"><button type=button class=navbar-toggle>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span>
</button>
<a class=navbar-brand href=/></a></div><div id=huxblog_navbar><div class=navbar-collapse><ul class="nav navbar-nav navbar-right"><li><a href=/>All Posts</a></li><li><a href=/categories/ai/ml/>ai/ml</a></li><li><a href=/categories/dotnet/>dotnet</a></li><li><a href=/categories/miscellaneous/>miscellaneous</a></li><li><a href=/categories/opc-ua/>opc ua</a></li><li><a href=/categories/til/>til</a></li><li><a href=/about//>ABOUT</a></li><li><a href=/search><i class="fa fa-search"></i></a></li></ul></div></div></div></nav><script>var $body=document.body,$toggle=document.querySelector(".navbar-toggle"),$navbar=document.querySelector("#huxblog_navbar"),$collapse=document.querySelector(".navbar-collapse");$toggle.addEventListener("click",handleMagic);function handleMagic(){$navbar.className.indexOf("in")>0?($navbar.className=" ",setTimeout(function(){$navbar.className.indexOf("in")<0&&($collapse.style.height="0px")},400)):($collapse.style.height="auto",$navbar.className+=" in")}</script><header class=intro-header style=background-image:url(/koepalex.logo.gif)><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=site-heading><h1></h1><span class=subheading></span></div></div></div></div></header><article><div class=container><div class=row><div class="col-lg-8 col-lg-offset-1
col-md-8 col-md-offset-1
col-sm-12
col-xs-12
post-container"><h1 id=crows-nestmqtt-and-the-vibe-engineering-adventure>Crow&rsquo;s NestMQTT and the Vibe Engineering Adventure</h1><p>In the world of (Industrial) Internet of Things (IIoT), MQTT is a widely adopted messaging protocol. Whether you‚Äôre debugging a flaky device or trying to understand system-wide message flow, a good MQTT client is a lifesaver.</p><p>There are many excellent MQTT clients available‚Äîlike MqttExplorer, MQTTX, mqttui, and the classic <code>mosquitto_sub</code>. However, none quite met <strong>my specific needs</strong>. That kicked off a wild journey: building my own client, <strong>Crow&rsquo;s NestMQTT</strong>, while exploring how <strong>Generative AI can accelerate software development</strong>.</p><p>This post shares how I turned a gap in tooling into a productive side quest with the help of LLMs.</p><hr><h2 id=-first-clue-designing-with-ai>üïµÔ∏è First Clue: Designing with AI</h2><p>Before writing any code, I started with a <strong>product definition prompt</strong> from <a href=https://harper.blog/2025/02/16/my-llm-codegen-workflow-atm/>Harper Reed‚Äôs LLM Codegen Workflow</a>, using <strong>OpenAPI o3-mini</strong> in chat mode:</p><blockquote><p>Ask me one question at a time so we can develop a thorough, step-by-step spec for this idea. Each question should build on my previous answers,
and our end goal is to have a detailed specification I can hand off to a developer. Let‚Äôs do this iteratively and dig into every relevant detail. Remember, > only one question at a time.
Here&rsquo;s the idea:<br>I need an MQTT client that runs on Windows, Linux, macOS, displays all message metadata (including correlation-data, response-topic, user-properties), handles thousands of messages per second, supports filtering/search/export, and can be controlled via keyboard shortcuts.</p></blockquote><p>That 15-minute chat felt like brainstorming with a colleague. Surprisingly, the conversation started with <strong>UI framework selection</strong>, not protocol handling. We chose:</p><ul><li><strong>AvaloniaUI</strong> for cross-platform desktop UI</li><li><strong>.NET (C#)</strong> for the frontend and backend</li><li><strong>MQTTnet</strong> as the MQTT library</li><li>A <strong>fixed UI refresh interval</strong> (1 second)</li><li>A <strong>ring buffer</strong> to handle high-volume messaging with predictable memory usage</li></ul><p>We decided to <strong>defer</strong> support for TLS, websockets, advanced authentication, and publishing until later iterations‚Äîstarting with read-only and anonymous connections.</p><p>To wrap the planning phase, I used Harper‚Äôs second prompt:</p><blockquote><p>Now that we‚Äôve wrapped up the brainstorming process, can you compile our findings into a comprehensive, developer-ready specification?
Include all relevant requirements, architecture choices, data handling details, error handling strategies, and a testing plan so a developer can
immediately begin implementation.</p></blockquote><p>In hindsight, I‚Äôd now lean on an AI coder&rsquo;s architecture tools like:</p><ul><li><a href=https://aider.chat/2024/09/26/architect.html>aider.chat architect mode</a></li><li><a href=https://docs.cline.bot/features/plan-and-act>Cline Plan mode</a></li><li><a href=https://docs.roocode.com/features/boomerang-tasks/>RooCode‚Äôs Boomerang tasks</a></li></ul><p>paired with <a href=https://github.com/modelcontextprotocol/servers/tree/main/src/sequentialthinking>Sequential Thinking&rsquo;s MCP server</a> to maintain session context and step-by-step progress.</p><hr><h2 id=-follow-the-lead-blueprint-to-prompts>üß≠ Follow the Lead: Blueprint to Prompts</h2><p>Following Harper‚Äôs next guidance, I asked o3-mini-high to generate a development plan:</p><blockquote><p>Draft a detailed, step-by-step blueprint for building this project. Then, once you have a solid plan, break it down into small, iterative chunks that build
on each other. Look at these chunks and then go another round to break it into small steps. Review the results and make sure that the steps are small
enough to be implemented safely with strong testing, but big enough to move the project forward. Iterate until you feel that the steps are right sized for
this project.</p><p>From here you should have the foundation to provide a series of prompts for a code-generation LLM that will implement each step in a test-driven manner.
Prioritize best practices, incremental progress, and early testing, ensuring no big jumps in complexity at any stage. Make sure that each prompt builds on
the previous prompts and ends with wiring things together. There should be no hanging or orphaned code that isn&rsquo;t integrated into a previous step.
Make sure and separate each prompt section. Use markdown. Each prompt should be tagged as text using code tags. The goal is to output prompts, but context,
etc is important as well.</p></blockquote><p>The result was fantastic‚Äîeach chunk clear enough to serve as a standalone <strong>codegen prompt</strong>.</p><p>However, I quickly hit friction in the next step: <strong>actually generating code</strong>. What was missing?</p><ul><li>A defined <strong>project structure</strong></li><li>Explicit <strong>library versions</strong></li><li>Style rules (.editorconfig, naming conventions)</li><li>Coding guidelines (e.g., DI pattern, method length, comment style)</li><li>Guardrails for AI coders<ul><li><a href=https://aider.chat/docs/usage/conventions.html>aider.chat conventions</a></li><li><a href=https://docs.cline.bot/features/cline-rules>Cline rules</a></li><li><a href=https://docs.roocode.com/features/custom-instructions/>RooCode custom instructions</a></li></ul></li></ul><p>Without that, AI-generated code was&mldr; <em>inconsistent at best</em>.</p><p>To fix this, I started using <strong>memory banks</strong> to persist critical project metadata:</p><ul><li><a href=https://docs.cline.bot/prompting/cline-memory-bank>Cline memory bank</a></li><li><a href=https://github.com/GreatScottyMac/roo-code-memory-bank>RooCode memory bank</a></li><li><a href=https://github.com/getzep/graphiti/blob/main/mcp_server/README.md>Graphiti MCP server</a> for structured, queryable memory graphs</li></ul><p>These helped AI tools stop asking the same questions repeatedly.</p><hr><h2 id=-digging-for-treasure-coding-with-context>üîç Digging for Treasure: Coding with Context</h2><p>Even with a solid spec and step plan, things didn‚Äôt <em>just work</em>. AI coders kept:</p><ul><li>Repeating the same errors</li><li>Breaking existing features</li><li>Downgrading library versions (!)</li></ul><p>After testing many LLM + tool combinations, I had the best experience with:</p><ul><li><strong>RooCode + Gemini 2.5 Pro</strong></li></ul><p>But results were only acceptable after <strong>prompt refinement</strong> and adding structural constraints:</p><ul><li>Define interfaces explicitly</li><li>Refactor any class >1000 LOC</li><li>Limit method complexity (e.g., cyclomatic complexity ‚â§ 20)</li><li>Use DI wherever possible</li></ul><p>Things got dramatically better when I integrated <a href=https://github.com/upstash/context7>Context7 MCP server</a>. It pulls in:</p><ul><li>Latest docs</li><li>Code snippets</li><li>API usage examples</li></ul><p>This was perfect for <strong>AvaloniaUI</strong>‚Äînot so much for <strong>MQTTnet</strong>. The library wasn‚Äôt indexed on <a href="https://context7.com/?q=MQTTnet">context7.com</a>, and its GitHub repo mostly contained commented C# samples instead of <code>.md</code> docs.</p><p>To work around that, I:</p><ol><li>Used <code>uithub.com/dotnet/MQTTnet</code> (not a typo‚Äîan alt frontend for GitHub content)</li><li>Selected <code>.cs</code> files only from the <code>/Samples</code> folder</li><li>Stored those locally for reference during prompt crafting</li></ol><hr><h2 id=-opening-the-chest-results>üí∞ Opening the Chest: Results</h2><p>Was it perfect? No. But here‚Äôs what <strong>really matters</strong>:</p><ul><li>The client works ‚úÖ</li><li>I use it every day ‚úÖ</li><li>Time spent from idea to usable tool: <strong>~10 hours</strong> ‚úÖ</li><li>Cost if built manually: likely much higher ‚ùå</li></ul><p>Sure, I could build a better client alone‚Äîbut this one gets the job done, <strong>faster</strong>, and lets me focus on things that pay the bills.</p><p>If you&rsquo;re facing similar MQTT challenges, you can check out my work:</p><p>üëâ <strong>Crow&rsquo;s NestMQTT</strong>: <a href=https://github.com/koepalex/Crow-s-Nest-MQTT>https://github.com/koepalex/Crow-s-Nest-MQTT</a></p><hr><h2 id=-final-thoughts>‚öì Final Thoughts</h2><p>Generative AI won&rsquo;t magically do all the work. But with the right architecture planning, persistent context, and clear prompts, it can become an effective <strong>pair programmer</strong>‚Äîone that doesn&rsquo;t get tired or annoyed by vague requirements.</p><p>If you&rsquo;re engineering tools for your own workflow, especially in IoT or high-throughput systems, give LLM-aided development a try. But remember: <strong>vibe engineering needs structure too</strong> and it will lead you to have developer friendly documentation in place.</p></div><div class="col-lg-3 col-lg-offset-0
col-md-3 col-md-offset-0
col-sm-12
col-xs-12
sidebar-container"><section class="visible-md visible-lg"><div class=short-about><a href=/about><img src=/avatar.jpg alt=avatar style=cursor:pointer></a><p>Software Architect in the Agile Age, with focus on Industrial IoT</p><ul class=list-inline><li><a href=mailto:this-is@alexander-koepke.de><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i>
<i class="fa fa-envelope fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://twitter.com/koepalex><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-twitter fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://github.com/koepalex><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://www.linkedin.com/in/alexander-k%c3%b6pke-3222a21b7/><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://stackoverflow.com/users/9474615/koepalex><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-stack-overflow fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=@koepalex@dotnet.social><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-mastodon fa-stack-1x fa-inverse"></i></span></a></li></ul></div></section></div></div></div></article><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center"><li><a href=mailto:this-is@alexander-koepke.de><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-envelope fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://twitter.com/koepalex><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-twitter fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://github.com/koepalex><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://www.linkedin.com/in/alexander-k%c3%b6pke-3222a21b7/><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://stackoverflow.com/users/9474615/koepalex><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-stack-overflow fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=@koepalex@dotnet.social><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-mastodon fa-stack-1x fa-inverse"></i></span></a></li><li><a href rel=alternate type=application/rss+xml title><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-rss fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="copyright text-muted">Copyright &copy; 2025<br><a href=https://themes.gohugo.io/hugo-theme-cleanwhite>CleanWhite Hugo Theme</a> by <a href=https://zhaohuabing.com>Huabing</a> |
<iframe style=margin-left:2px;margin-bottom:-5px frameborder=0 scrolling=0 width=100px height=20px src="https://ghbtns.com/github-btn.html?user=zhaohuabing&repo=hugo-theme-cleanwhite&type=star&count=true"></iframe></p></div></div></div></footer><script>function loadAsync(e,t){var s=document,o="script",n=s.createElement(o),i=s.getElementsByTagName(o)[0];n.src=e,t&&n.addEventListener("load",function(e){t(null,e)},!1),i.parentNode.insertBefore(n,i)}</script><script>$("#tag_cloud").length!==0&&loadAsync("/js/jquery.tagcloud.js",function(){$.fn.tagcloud.defaults={color:{start:"#bbbbee",end:"#0085a1"}},$("#tag_cloud a").tagcloud()})</script><script>loadAsync("https://cdn.jsdelivr.net/npm/fastclick@1.0.6/lib/fastclick.min.js",function(){var e=document.querySelector("nav");e&&FastClick.attach(e)})</script><script type=text/javascript>function generateCatalog(e){_containerSelector="div.post-container";var t,n,s,o,i,a=$(_containerSelector),r=a.find("h1,h2,h3,h4,h5,h6");return $(e).html(""),r.each(function(){t=$(this).prop("tagName").toLowerCase(),o="#"+$(this).prop("id"),n=$(this).text(),i=$('<a href="'+o+'" rel="nofollow">'+n+"</a>"),s=$('<li class="'+t+'_nav"></li>').append(i),$(e).append(s)}),!0}generateCatalog(".catalog-body"),$(".catalog-toggle").click(function(e){e.preventDefault(),$(".side-catalog").toggleClass("fold")}),loadAsync("/js/jquery.nav.js",function(){$(".catalog-body").onePageNav({currentClass:"active",changeHash:!1,easing:"swing",filter:"",scrollSpeed:700,scrollOffset:0,scrollThreshold:.2,begin:null,end:null,scrollChange:null,padding:80})})</script></body></html>